
<html>
<head>
<style>
*
{
   font-family: ä»¿å®‹;
}

@media screen {
  div.divFooter {
    display: none;
  }
}
@media print {
  div.divFooter {
    position: fixed;
    bottom: 0;
  }
}
</style>
<!--åŒºå—é“¾è·¨å¢ƒé’±åŒ…å‘å¡è¡Œå‰ç½®SDKä½¿ç”¨æ–‡æ¡£-->
</head>
<body>
</body>
</html>



```mermaid
%% è¢«æ‰«
sequenceDiagram
    participant å•†æˆ·ç«¯æ‰«ç å™¨å…·
    participant èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ
    participant BOCHK APP
    participant BOCHKåå°ç³»ç»Ÿ
    participant åŒºå—é“¾èŠ‚ç‚¹
    participant WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)

    BOCHK APP->>BOCHK APP: ç”¨æˆ·è¿›å…¥WePOPï¼Œè¾“å…¥æ”¯ä»˜å¯†ç 
    BOCHK APP->>BOCHKåå°ç³»ç»Ÿ: è·å–æ”¯ä»˜æˆæƒç 
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: APPç”¨æˆ·é‰´æƒ
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: è·å–æ”¯ä»˜æˆæƒç ï¼ˆget QR code string by Wallet idï¼‰
    BOCHKåå°ç³»ç»Ÿ-->>BOCHK APP: è¿”å›æ”¯ä»˜æˆæƒç 
    BOCHK APP->>BOCHK APP: åœ¨BOCHK APPä¸­å±•ç°æ”¯ä»˜æˆæƒç 
    å•†æˆ·ç«¯æ‰«ç å™¨å…·-->>BOCHK APP: æ‰«æç”¨æˆ·æ”¯ä»˜æˆæƒç 
    å•†æˆ·ç«¯æ‰«ç å™¨å…·->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: è½¬å‘æ”¯ä»˜æˆæƒç 
    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: ç”Ÿæˆèšåˆæ”¯ä»˜æœåŠ¡å•†è®¢å•
    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: è¯†åˆ«å‡ºæ˜¯WeBankçš„æ”¯ä»˜æˆæƒç 
    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è½¬å‘æ”¯ä»˜æˆæƒç ç»™WeBank(é€šè¿‡open apiï¼‰ï¼Œå¸¦ä¸Šå•†æˆ·åœ¨èšåˆæ”¯ä»˜æœåŠ¡å•†çš„å•†æˆ·id

    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): åˆ¤æ–­å•†æˆ·åˆæ³•æ€§ï¼ŒæŸ¥åˆ°å•†æˆ·åœ¨WeBankçš„å•†æˆ·idï¼Œç”ŸæˆWeBankè®¢å•
    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>BOCHKåå°ç³»ç»Ÿ: è¯·æ±‚æ‰£æ¬¾ï¼ˆè½¬å‘æ”¯ä»˜æˆæƒç ï¼ŒWeBankå’Œèšåˆæ”¯ä»˜æœåŠ¡å•†è®¢å•id,èµ°é“¾ä¸Šé“¾ä¸‹ï¼‰
    %%
    BOCHKåå°ç³»ç»Ÿ-->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è¿”å›è¡¨æ˜æ”¶åˆ°è¯·æ±‚
    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)-->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: è¿”å›WeBankè®¢å•idï¼ˆæ³¨æ„è¿™é‡Œæ²¡æœ‰è¿”å›BOCHKè®¢å•idï¼‰

    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: éªŒè¯ç”¨æˆ·æ”¯ä»˜æˆæƒç 
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: ç”ŸæˆBOCHKè®¢å•

    Note right of BOCHKåå°ç³»ç»Ÿ: ä¸‹é¢çš„æµç¨‹â€œä¸»æ‰«â€â€œè¢«æ‰«â€å®Œå…¨ä¸€æ ·
    %%
    BOCHKåå°ç³»ç»Ÿ->>åŒºå—é“¾èŠ‚ç‚¹: è°ƒç”¨SDKæ±‡ç‡æ¢ç®—å‡½æ•°(Fx api)
    åŒºå—é“¾èŠ‚ç‚¹-->>BOCHKåå°ç³»ç»Ÿ: è¿”å›æ±‡ç‡
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: è®°å‡ç”¨æˆ·HKD
    BOCHKåå°ç³»ç»Ÿ->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è°ƒç”¨è®°è´¦æ¥å£ï¼ˆé“¾ä¸Šé“¾ä¸‹ï¼‰å¸¦ä¸ŠBOCHKæ‰£æ¬¾ç­‰çš„æ‰§è¡ŒçŠ¶æ€

    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>åŒºå—é“¾èŠ‚ç‚¹: è°ƒç”¨åŒºå—é“¾è®°è´¦æ¥å£
    åŒºå—é“¾èŠ‚ç‚¹->>åŒºå—é“¾èŠ‚ç‚¹: è°ƒç”¨æ¸…ç®—è¡Œåˆçº¦ï¼šåˆçº¦è®°è´¦
    åŒºå—é“¾èŠ‚ç‚¹-->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è¿”å›
    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)-->>BOCHKåå°ç³»ç»Ÿ: è¿”å›è®°è´¦ç»“æœ: æˆåŠŸï¼Œå¤±è´¥ï¼ŒæœªçŸ¥
    opt WeBankè¿”å›è¶…æ—¶
        BOCHKåå°ç³»ç»Ÿ->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è°ƒç”¨æŸ¥è¯¢API,æŸ¥è¯¢è®¢å•çŠ¶æ€
    end
    alt å¤±è´¥
        BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: éœ€è¦å¯¹ç”¨æˆ·æ‰£æ‰çš„HKDè¿›è¡Œå†²æ­£
    else æœªçŸ¥
        BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: ä¸åšå¤„ç†ï¼Œå¯¹è´¦çš„æ—¶å€™å¤„ç†è¿™ç§æƒ…å†µ
    end
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: æ›´æ–°è®¢å•çŠ¶æ€
    BOCHKåå°ç³»ç»Ÿ-->>BOCHK APP: è¿”å›

    opt BOCHKåå°ç³»ç»Ÿè¿”å›è¶…æ—¶
      BOCHK APP->>BOCHKåå°ç³»ç»Ÿ: æŸ¥è¯¢æ”¯ä»˜ç»“æœ
      BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: æŸ¥è¯¢æ”¯ä»˜ç»“æœ
      BOCHKåå°ç³»ç»Ÿ-->>BOCHK APP: è¿”å›æ”¯ä»˜ç»“æœ
    end

    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: é€šçŸ¥èšåˆæ”¯ä»˜æœåŠ¡å•†å‘è´§ï¼ˆä¼šå¤šæ¬¡é‡è¯•ï¼‰
    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: é€šçŸ¥å•†æˆ·å‘è´§
    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ-->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è¿”å›å‘è´§ç»“æœï¼ˆé‡è¯•çš„è¯·æ±‚ä¾ç„¶éœ€è¦ç»™WeBankå›åŒ…ï¼‰

    opt æœªæ”¶åˆ°WeBankå‘èµ·çš„å‘è´§é€šçŸ¥ï¼Œå½“ç”¨æˆ·è¯¢é—®å•†æˆ·æ˜¯å¦æ”¶åˆ°æ¬¾æ—¶ï¼Œç”±å•†æˆ·åå°äººå·¥è§¦å‘è¯·æ±‚
        èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è°ƒç”¨æŸ¥è¯¢è®¢å•API
        WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)-->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: è¿”å›è®¢å•çŠ¶æ€
    end

    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: æ›´æ–°è®¢å•çŠ¶æ€

```
