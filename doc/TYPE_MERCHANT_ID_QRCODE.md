
<html>
<head>
<style>
*
{
   font-family: ä»¿å®‹;
}

@media screen {
  div.divFooter {
    display: none;
  }
}
@media print {
  div.divFooter {
    position: fixed;
    bottom: 0;
  }
}
</style>
<!--åŒºå—é“¾è·¨å¢ƒé’±åŒ…å‘å¡è¡Œå‰ç½®SDKä½¿ç”¨æ–‡æ¡£-->
</head>
<body>
</body>
</html>


```mermaid

%% ä¸»æ‰«
sequenceDiagram
    participant èšåˆæ”¯ä»˜æœåŠ¡å•†æ”¾ç½®åœ¨å•†æˆ·å¤„çš„äºŒç»´ç 
    participant èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ
    participant BOCHK APP
    participant BOCHKåå°ç³»ç»Ÿ
    participant åŒºå—é“¾èŠ‚ç‚¹
    participant WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)

    BOCHK APP->>èšåˆæ”¯ä»˜æœåŠ¡å•†æ”¾ç½®åœ¨å•†æˆ·å¤„çš„äºŒç»´ç : æ‰«æå•†æˆ·çš„æ”¶æ¬¾äºŒç»´ç 
    BOCHK APP->>BOCHK APP: è§£æå‡ºäºŒç»´ç ä»£è¡¨çš„å­—ç¬¦ä¸²
    BOCHK APP->>BOCHKåå°ç³»ç»Ÿ: é€ä¼ æ‰«ç ä¿¡æ¯
    BOCHKåå°ç³»ç»Ÿ->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): æäº¤æ‰«ç ä¿¡æ¯ï¼ˆé“¾ä¸Šé“¾ä¸‹ï¼‰
    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è§£æèšåˆæ”¯ä»˜æœåŠ¡å•†çš„äºŒç»´ç ï¼Œè·å–åˆ°å•†æˆ·åœ¨èšåˆæ”¯ä»˜æœåŠ¡å•†çš„å•†æˆ·id
    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): é€šè¿‡å•†æˆ·åœ¨èšåˆæ”¯ä»˜æœåŠ¡å•†çš„å•†æˆ·idæŸ¥åˆ°å•†æˆ·åœ¨WeBankçš„å•†æˆ·idï¼ŒéªŒè¯å•†æˆ·åˆæ³•æ€§

    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)-->>BOCHKåå°ç³»ç»Ÿ: è¿”å›å•†æˆ·ä¿¡æ¯ï¼ˆå•†æˆ·idï¼Œå•†æˆ·åç§°ç­‰ï¼‰
    Note over WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS),BOCHKåå°ç³»ç»Ÿ: å¹³å‡å»¶æ—¶ï¼š161.349msï¼ˆè·¨å¢ƒï¼‰
    BOCHKåå°ç³»ç»Ÿ-->>BOCHK APP: è¿”å›
    BOCHK APP->>BOCHK APP: å±•ç¤ºå•†æˆ·ä¿¡æ¯
    BOCHK APP->>BOCHK APP: ç”¨æˆ·è¾“å…¥é‡‘é¢

    %% æ˜¯å¦éœ€è¦ï¼Ÿ
    BOCHK APP->>BOCHKåå°ç³»ç»Ÿ: ç‚¹å‡»ç¡®è®¤æ”¯ä»˜æŒ‰é’®
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: ç”ŸæˆBOCHKè®¢å•
    BOCHKåå°ç³»ç»Ÿ->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è¯·æ±‚ç”ŸæˆWeBankè®¢å•ï¼ˆå¸¦ä¸ŠBOCHKè®¢å•id,èµ°é“¾ä¸Šé“¾ä¸‹ï¼‰
    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): ç”ŸæˆWeBankè®¢å•ï¼ˆä¼šæ˜ å°„èšåˆæ”¯ä»˜æœåŠ¡å•†è®¢å•idå’ŒBOCHKè®¢å•idï¼‰
    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: ä¸‹å•ï¼Œè¯·æ±‚ç”Ÿæˆèšåˆæ”¯ä»˜æœåŠ¡å•†çš„è®¢å•
    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: ç”Ÿæˆèšåˆæ”¯ä»˜æœåŠ¡å•†çš„è®¢å•
    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ-->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è¿”å›èšåˆæ”¯ä»˜æœåŠ¡å•†çš„è®¢å•id
    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)-->>BOCHKåå°ç³»ç»Ÿ: è¿”å›WeBankè®¢å•id,èšåˆæ”¯ä»˜æœåŠ¡å•†è®¢å•id
    Note over WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS),BOCHKåå°ç³»ç»Ÿ: å¹³å‡å»¶æ—¶ï¼š281.744msï¼ˆè·¨å¢ƒï¼‰
    BOCHKåå°ç³»ç»Ÿ-->>BOCHK APP: è¿”å›

    BOCHK APP->>BOCHK APP: è¾“å…¥æ”¯ä»˜å¯†ç 

    BOCHK APP->>BOCHKåå°ç³»ç»Ÿ: å‘èµ·æ¶ˆè´¹è¯·æ±‚
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: è¯·æ±‚é‰´æƒ
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: éªŒè¯æ”¯ä»˜å¯†ç 

    Note right of BOCHKåå°ç³»ç»Ÿ: ä¸‹é¢çš„æµç¨‹â€œä¸»æ‰«â€â€œè¢«æ‰«â€å®Œå…¨ä¸€æ ·

    %%
    BOCHKåå°ç³»ç»Ÿ->>åŒºå—é“¾èŠ‚ç‚¹: è°ƒç”¨SDKæ±‡ç‡æ¢ç®—å‡½æ•°(Fx api)
    åŒºå—é“¾èŠ‚ç‚¹-->>BOCHKåå°ç³»ç»Ÿ: è¿”å›æ±‡ç‡
    Note over åŒºå—é“¾èŠ‚ç‚¹,BOCHKåå°ç³»ç»Ÿ: å¹³å‡å»¶æ—¶ï¼š35.5801msï¼ˆéè·¨å¢ƒï¼‰
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: è®°å‡ç”¨æˆ·HKD
    BOCHKåå°ç³»ç»Ÿ->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è°ƒç”¨è®°è´¦æ¥å£ï¼ˆé“¾ä¸Šé“¾ä¸‹ï¼‰

    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>åŒºå—é“¾èŠ‚ç‚¹: è°ƒç”¨åŒºå—é“¾è®°è´¦æ¥å£
    åŒºå—é“¾èŠ‚ç‚¹->>åŒºå—é“¾èŠ‚ç‚¹: è°ƒç”¨æ¸…ç®—è¡Œåˆçº¦ï¼šåˆçº¦è®°è´¦
    åŒºå—é“¾èŠ‚ç‚¹-->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è¿”å›
    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)-->>BOCHKåå°ç³»ç»Ÿ: è¿”å›è®°è´¦ç»“æœ: æˆåŠŸï¼Œå¤±è´¥ï¼ŒæœªçŸ¥
    Note over WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS),BOCHKåå°ç³»ç»Ÿ: å¹³å‡å»¶æ—¶ï¼š3462.83ms / 1856.36msï¼ˆè·¨å¢ƒï¼‰
    Note over WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS),BOCHKåå°ç³»ç»Ÿ: WeBankä¸BOCHKäº¤äº’æ€»å¹³å‡å»¶æ—¶ï¼š3778ms
    opt WeBankè¿”å›è¶…æ—¶
        BOCHKåå°ç³»ç»Ÿ->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è°ƒç”¨æŸ¥è¯¢API,æŸ¥è¯¢è®¢å•çŠ¶æ€
    end
    alt å¤±è´¥
        BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: éœ€è¦å¯¹ç”¨æˆ·æ‰£æ‰çš„HKDè¿›è¡Œå†²æ­£
    else æœªçŸ¥
        BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: ä¸åšå¤„ç†ï¼Œå¯¹è´¦çš„æ—¶å€™å¤„ç†è¿™ç§æƒ…å†µ
    end
    BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: æ›´æ–°è®¢å•çŠ¶æ€
    BOCHKåå°ç³»ç»Ÿ-->>BOCHK APP: è¿”å›

    opt BOCHKåå°ç³»ç»Ÿè¿”å›è¶…æ—¶
      BOCHK APP->>BOCHKåå°ç³»ç»Ÿ: æŸ¥è¯¢æ”¯ä»˜ç»“æœ
      BOCHKåå°ç³»ç»Ÿ->>BOCHKåå°ç³»ç»Ÿ: æŸ¥è¯¢æ”¯ä»˜ç»“æœ
      BOCHKåå°ç³»ç»Ÿ-->>BOCHK APP: è¿”å›æ”¯ä»˜ç»“æœ
    end

    WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: é€šçŸ¥èšåˆæ”¯ä»˜æœåŠ¡å•†å‘è´§ï¼ˆä¼šå¤šæ¬¡é‡è¯•ï¼‰
    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: é€šçŸ¥å•†æˆ·å‘è´§
    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ-->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è¿”å›ï¼ˆé‡å¤çš„è¯·æ±‚ä¾ç„¶éœ€è¦ç»™WeBankå›åŒ…ï¼‰

    opt æœªæ”¶åˆ°WeBankå‘èµ·çš„å‘è´§é€šçŸ¥ï¼Œå½“ç”¨æˆ·è¯¢é—®å•†æˆ·æ˜¯å¦æ”¶åˆ°æ¬¾æ—¶ï¼Œç”±å•†æˆ·åå°äººå·¥è§¦å‘è¯·æ±‚
        èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS): è°ƒç”¨æŸ¥è¯¢è®¢å•API
        WeBankæ”¶å•åå°ç³»ç»Ÿ(ATS)-->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: è¿”å›è®¢å•çŠ¶æ€
    end

    èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ->>èšåˆæ”¯ä»˜æœåŠ¡å•†åå°ç³»ç»Ÿ: æ›´æ–°è®¢å•çŠ¶æ€

```
